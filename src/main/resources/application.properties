# Configurações do banco de dados PostgreSQL
spring.datasource.url=jdbc:postgresql://localhost:5432/axis
spring.datasource.username=filipeAxis
spring.datasource.password=euFilipe03060728!
spring.datasource.driver-class-name=org.postgresql.Driver

# Configurações do JPA/Hibernate
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.default_schema=core

# Configurações do JWT
app.jwtSecret=AXISJWTSecretKeyForDevelopmentOnlyChangeInProductionXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
app.jwtExpirationInMs=604800000

# Configurações do servidor
server.port=8080

# Configurações do Swagger
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html

# Configurações de Logging para Debug
logging.level.com.axis=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.root=INFO

# Configuração de formato de data para aceitar formato brasileiro
spring.jackson.date-format=dd/MM/yyyy
spring.jackson.time-zone=America/Sao_Paulo

# ========================================
# CONFIGURAÇÕES DE EMAIL
# ========================================
# SMTP Server (SendGrid)
spring.mail.host=${MAIL_HOST:smtp.sendgrid.net}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:SUA_KEY}
spring.mail.password=${MAIL_PASSWORD:SUA_KEY}

# Configurações de autenticação SMTP
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# Timeout (prevenir travamento)
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Remetente padrão
app.mail.from=${MAIL_FROM:noreply@portalaxis.com.br}
app.mail.fromName=${MAIL_FROM_NAME:AXIS - Plataforma de Terapia}

# ========================================
# CONFIGURAÇÕES DE RESET DE SENHA
# ========================================
# Tempo de expiração do token (em minutos)
app.reset-senha.token-expiration-minutes=15

# Rate limiting por usuário (máx tentativas por hora)
app.reset-senha.max-attempts-per-user-per-hour=3

# Rate limiting global por IP (máx tentativas por hora)
app.reset-senha.max-attempts-per-ip-per-hour=10

# URL do frontend para reset de senha
app.reset-senha.frontend-url=${FRONTEND_URL:https://portalaxis.com.br}/resetar-senha

# Habilitar detecção de anomalias (opcional, implementar depois)
app.reset-senha.anomaly-detection-enabled=false